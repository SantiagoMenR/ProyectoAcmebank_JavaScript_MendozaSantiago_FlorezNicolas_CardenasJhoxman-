<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco Acme - Dashboard</title>
    <link rel="stylesheet" href="styles-dashboard.css">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../styles-index.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.3/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <div class="logo">
                <i class="fas fa-university"></i>
                <h1>Banco Acme</h1>
            </div>
            <button id="sidebarToggle" class="hamburger" aria-label="Abrir menú" style="display:none">
                <i class="fas fa-bars"></i>
            </button>
            <div class="user-info">
                <span id="userName"></span>
                <button class="btn btn-secondary" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </button>
            </div>
        </header>
        
        <div class="dashboard-content">
            <nav class="sidebar" id="sidebar">
                <ul class="menu">
                    <li><a href="#" onclick="showSection('account-summary')" class="menu-item active">
                        <i class="fas fa-chart-line"></i> Resumen de Cuenta
                    </a></li>
                    <li><a href="#" onclick="showSection('transactions')" class="menu-item">
                        <i class="fas fa-list"></i> Resumen de Transacciones
                    </a></li>
                    </a></li>
                    <li><a href="#" onclick="showSection('qr-code')" class="menu-item">
                        <i class="fas fa-qrcode"></i> Mi Código QR
                    </a></li>
                    <li><a href="#" onclick="showSection('qr-scanner')" class="menu-item">
                        <i class="fas fa-camera"></i> Escanear QR
                    </a></li>
                    <li><a href="#" onclick="showSection('deposit')" class="menu-item">
                        <i class="fas fa-plus-circle"></i> Consignación Electrónica
                    </a></li>
                    <li><a href="#" onclick="showSection('withdrawal')" class="menu-item">
                        <i class="fas fa-minus-circle"></i> Retiro de Dinero
                    </a></li>
                    <li><a href="#" onclick="showSection('payments')" class="menu-item">
                        <i class="fas fa-file-invoice"></i> Pago de Servicios
                    </a></li>
                    <li><a href="#" onclick="showSection('statement')" class="menu-item">
                        <i class="fas fa-file-alt"></i> Extracto Bancario
                    </a></li>
                    <li><a href="#" onclick="showSection('certificate')" class="menu-item">
                        <i class="fas fa-certificate"></i> Certificado Bancario
                    </a></li>
                </ul>
            </nav>
            <div class="sidebar-backdrop" id="sidebarBackdrop" style="display:none"></div>
            
            <main class="main-content">
                <!-- Account Summary Section -->
                <section id="account-summary" class="content-section active">
                    <h2>Resumen de Cuenta</h2>
                    <div class="account-card">
                        <div class="card-header">
                            <h3>Información de la Cuenta</h3>
                        </div>
                        <div class="card-body">
                            <div class="account-info">
                                <div class="info-item">
                                    <label>Número de Cuenta:</label>
                                    <span id="accountNumber"></span>
                                </div>
                                <div class="info-item">
                                    <label>Saldo Actual:</label>
                                    <span id="accountBalance" class="balance"></span>
                                </div>
                                <div class="info-item">
                                    <label>Fecha de Creación:</label>
                                    <span id="creationDate"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Transactions Section -->
                <section id="transactions" class="content-section">
                    <h2>Resumen de Transacciones</h2>
                    <div class="transactions-header">
                        <p>Últimas 10 transacciones</p>
                        <button class="btn btn-secondary" onclick="printTransactions()">
                            <i class="fas fa-print"></i> Imprimir
                        </button>
                    </div>
                    <div class="transactions-table">
                        <table id="transactionsTable">
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Referencia</th>
                                    <th>Tipo</th>
                                    <th>Concepto</th>
                                    <th>Valor</th>
                                </tr>
                            </thead>
                            <tbody id="transactionsBody">
                            </tbody>
                        </table>
                    </div>
                </section>

                 <!-- QR Code Section -->
                <section id="qr-code" class="content-section">
                    <h2>Mi Código QR</h2>
                    <div class="qr-card">
                        <div class="card-header">
                            <h3>Código QR para Recibir Pagos</h3>
                        </div>
                        <div class="card-body">
                            <div class="qr-generator">
                                <div class="qr-display">
                                    <img class="img" src="./assets/Captura desde 2025-07-16 16-11-39.png" alt="">
                                </div>
                                <div class="qr-info">
                                    <p><strong>Cuenta:</strong> <span id="qrAccount"></span></p>
                                    <p><strong>Titular:</strong> <span id="qrName"></span></p>
                                    <p class="qr-instruction">Comparte este código QR para recibir pagos directamente en tu cuenta</p>
                                </div>
                                <div class="qr-actions">
                                    <button class="btn btn-primary" onclick="generateQR()">
                                        <i class="fas fa-refresh"></i> Generar Nuevo QR
                                    </button>
                                    <button class="btn btn-secondary" onclick="qr()">
                                        <i class="fas fa-print"></i> Imprimir
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- QR Scanner Section -->
                <section id="qr-scanner" class="content-section">
                    <h2>Escanear Código QR</h2>
                    <div class="scanner-card">
                        <div class="card-header">
                            <h3>Realizar Pago con Código QR</h3>
                        </div>
                        <div class="card-body">
                            <div class="scanner-container">
                                <div id="qr-reader" class="qr-reader"></div>
                                <div class="scanner-controls">
                                    <button id="start-scan" class="btn btn-primary">
                                        <i class="fas fa-camera"></i> Iniciar Escaneo
                                    </button>
                                    <button id="stop-scan" class="btn btn-secondary" style="display: none;">
                                        <i class="fas fa-stop"></i> Detener Escaneo
                                    </button>
                                </div>
                            </div>
                            
                            <div id="payment-form" class="payment-form hidden">
                                <h4>Información del Destinatario</h4>
                                <div class="recipient-info">
                                    <p><strong>Cuenta:</strong> <span id="recipientAccount"></span></p>
                                    <p><strong>Titular:</strong> <span id="recipientName"></span></p>
                                </div>
                                <form id="qrPaymentForm">
                                    <div class="form-group">
                                        <label for="qrPaymentAmount">Cantidad a Pagar</label>
                                        <input type="number" id="qrPaymentAmount" name="qrPaymentAmount" min="1" step="0.01" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="qrPaymentConcept">Concepto del Pago</label>
                                        <input type="text" id="qrPaymentConcept" name="qrPaymentConcept" placeholder="Ej: Pago de producto, servicio, etc." required>
                                    </div>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-credit-card"></i> Realizar Pago
                                    </button>
                                    <button type="button" class="btn btn-secondary" onclick="cancelPayment()">
                                        <i class="fas fa-times"></i> Cancelar
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Deposit Section -->
                <section id="deposit" class="content-section">
                    <h2>Consignación Electrónica</h2>
                    <div class="transaction-form">
                        <div class="user-info-display">
                            <p><strong>Cuenta:</strong> <span id="depositAccount"></span></p>
                            <p><strong>Titular:</strong> <span id="depositName"></span></p>
                        </div>
                        <form id="depositForm">
                            <div class="form-group">
                                <label for="depositAmount">Cantidad a Consignar</label>
                                <input type="number" id="depositAmount" name="depositAmount" min="1" step="0.01" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Realizar Consignación</button>
                        </form>
                    </div>
                </section>
                
                <!-- Withdrawal Section -->
                <section id="withdrawal" class="content-section">
                    <h2>Retiro de Dinero</h2>
                    <div class="transaction-form">
                        <div class="user-info-display">
                            <p><strong>Cuenta:</strong> <span id="withdrawalAccount"></span></p>
                            <p><strong>Titular:</strong> <span id="withdrawalName"></span></p>
                        </div>
                        <form id="withdrawalForm">
                            <div class="form-group">
                                <label for="withdrawalAmount">Cantidad a Retirar</label>
                                <input type="number" id="withdrawalAmount" name="withdrawalAmount" min="1" step="0.01" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Realizar Retiro</button>
                        </form>
                    </div>
                </section>
                
                <!-- Payments Section -->
                <section id="payments" class="content-section">
                    <h2>Pago de Servicios Públicos</h2>
                    <div class="transaction-form">
                        <div class="user-info-display">
                            <p><strong>Cuenta:</strong> <span id="paymentAccount"></span></p>
                            <p><strong>Titular:</strong> <span id="paymentName"></span></p>
                        </div>
                        <form id="paymentForm">
                            <div class="form-group">
                                <label for="serviceType">Servicio Público</label>
                                <select id="serviceType" name="serviceType" required>
                                    <option value="">Selecciona un servicio</option>
                                    <option value="Energía">Energía</option>
                                    <option value="Agua">Agua</option>
                                    <option value="Gas Natural">Gas Natural</option>
                                    <option value="Internet">Internet</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="serviceReference">Referencia del Servicio</label>
                                <input type="text" id="serviceReference" name="serviceReference" required>
                            </div>
                            <div class="form-group">
                                <label for="paymentAmount">Valor a Pagar</label>
                                <input type="number" id="paymentAmount" name="paymentAmount" min="1" step="0.01" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Realizar Pago</button>
                        </form>
                    </div>
                </section>
                
                <!-- Statement Section -->
                <section id="statement" class="content-section">
                    <h2>Extracto Bancario</h2>
                    <div class="statement-form">
                        <div class="user-info-display">
                            <p><strong>Cuenta:</strong> <span id="statementAccount"></span></p>
                            <p><strong>Titular:</strong> <span id="statementName"></span></p>
                        </div>
                        <form id="statementForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="statementYear">Año</label>
                                    <select id="statementYear" name="statementYear" required>
                                        <option value="">Selecciona año</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="statementMonth">Mes</label>
                                    <select id="statementMonth" name="statementMonth" required>
                                        <option value="">Selecciona mes</option>
                                        <option value="1">Enero</option>
                                        <option value="2">Febrero</option>
                                        <option value="3">Marzo</option>
                                        <option value="4">Abril</option>
                                        <option value="5">Mayo</option>
                                        <option value="6">Junio</option>
                                        <option value="7">Julio</option>
                                        <option value="8">Agosto</option>
                                        <option value="9">Septiembre</option>
                                        <option value="10">Octubre</option>
                                        <option value="11">Noviembre</option>
                                        <option value="12">Diciembre</option>
                                    </select>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Generar Extracto</button>
                        </form>
                        <div id="statementResult" class="statement-result hidden">
                            <div class="statement-header">
                                <button class="btn btn-secondary" onclick="printStatement()">
                                    <i class="fas fa-print"></i> Imprimir
                                </button>
                            </div>
                            <table id="statementTable">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Referencia</th>
                                        <th>Tipo</th>
                                        <th>Concepto</th>
                                        <th>Valor</th>
                                    </tr>
                                </thead>
                                <tbody id="statementBody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
                
                <!-- Certificate Section -->
                <section id="certificate" class="content-section">
                    <h2>Certificado Bancario</h2>
                    <div class="certificate-container">
                        <div class="certificate-header">
                            <button class="btn btn-secondary" onclick="printCertificate()">
                                <i class="fas fa-print"></i> Imprimir
                            </button>
                        </div>
                        <div id="certificateContent" class="certificate-content">
                            <div class="certificate-header-content">
                                <div class="certificate-logo">
                                    <i class="fas fa-university"></i>
                                    <h1>BANCO ACME</h1>
                                </div>
                                <h2>CERTIFICADO BANCARIO</h2>
                            </div>
                            <div class="certificate-body">
                                <p class="certificate-text">
                                    El suscrito Gerente General del BANCO ACME, certifica que:
                                </p>
                                <p class="certificate-text">
                                    <strong id="certificateUserName"></strong>, identificado(a) con <strong id="certificateIdType"></strong> número <strong id="certificateIdNumber"></strong>, es titular de la cuenta de ahorros número <strong id="certificateAccountNumber"></strong> en nuestra institución financiera.
                                </p>
                                <p class="certificate-text">
                                    La cuenta se encuentra activa desde el <strong id="certificateCreationDate"></strong> y está al día en todas sus obligaciones.
                                </p>
                                <p class="certificate-text">
                                    Este certificado se expide a solicitud del interesado para los fines que considere convenientes.
                                </p>
                                <div class="certificate-footer">
                                    <p>Dado en la ciudad de Bogotá, a los <span id="certificateCurrentDate"></span></p>
                                    <div class="signature-section">
                                        <div class="signature-line"></div>
                                        <p>Gerente General<br>BANCO ACME</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <div id="errorMessage" class="error-message hidden"></div>
                <div id="successMessage" class="success-message hidden"></div>
            </main>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="chatModal" class="chat-modal">
        <div class="chat-modal-content">
            <div class="chat-header">
                <div class="chat-title">
                    <i class="fas fa-robot"></i>
                    <h3>Asistente Virtual</h3>
                </div>
                <div class="chat-controls">
                    <a href="dashboard.html"><button class="chat-minimize" onclick="minimizeChat()">
                        <i class="fas fa-minus"></i>
                    </button></a>
                    <a href="dashboard.html"><button class="chat-close" onclick="closeChat()">
                        <i class="fas fa-times"></i>
                    </button></a>
                </div>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="message bot-message">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <p>¡Hola! Soy tu asistente virtual de Banco Acme. ¿En qué puedo ayudarte hoy?</p>
                        <div class="message-time">
                            <span id="initialTime"></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="quick-actions">
                <div class="quick-buttons">
                    <button class="quick-btn" onclick="sendQuickMessage('¿Cuál es mi saldo actual?')">
                        <i class="fas fa-wallet"></i> Saldo
                    </button>
                    <button class="quick-btn" onclick="sendQuickMessage('¿Cómo hacer una transferencia?')">
                        <i class="fas fa-exchange-alt"></i> Transferencias
                    </button>
                    <button class="quick-btn" onclick="sendQuickMessage('¿Cuáles son los horarios de atención?')">
                        <i class="fas fa-clock"></i> Horarios
                    </button>
                </div>
            </div>
            
            <div class="chat-input-container">
                <form id="chatForm" class="chat-form">
                    <div class="input-group">
                        <input type="text" id="messageInput" placeholder="Escribe tu mensaje aquí..." autocomplete="off">
                        <button type="submit" class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Floating Chat Button -->
    <div class="chat-toggle" id="chatToggle" onclick="toggleChat()">
        <i class="fas fa-comments"></i>
        <span class="chat-badge" id="chatBadge">1</span>
    </div>
    
    <script src="../script.js"></script>
    <script src="dashboard.js"></script>
    <script src="chatbot.js"></script>
</body>
</html>
